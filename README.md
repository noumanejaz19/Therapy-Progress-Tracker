# Therapy Progress Tracker POC

## **Overview**
The Therapy Progress Tracker POC is designed to help psychotherapists track therapy progress by analyzing session files. It uses GAD-7 and PHQ-9 assessments to evaluate anxiety and depression, extracts insights about symptoms, and provides visualizations to monitor progress over time. The application processes uploaded session files and generates a detailed report.

---

## **Key Features**
1. **File Upload and Processing**:
   - Supports `.txt` and `.json` session files.
   - Automatically detects and calculates GAD-7 and PHQ-9 scores based on session text.

2. **Insights and Summaries**:
   - Tracks symptom trends across sessions.
   - Summarizes progress trends with natural language explanations using OpenAI's GPT API.

3. **Visualizations**:
   - Generates line charts, bar charts, pie charts, and scatter plots for symptoms and assessment scores.

4. **Multi-Client Analysis**:
   - Provides separate insights for multiple clients when files are uploaded together.

5. **Report Generation**:
   - Creates a downloadable `progress_report.json` with all insights and visualizations.

---

## **Directory Structure**
```plaintext
project/
├── app/
│   ├── app.py                # Main Streamlit application
├── backend/
│   ├── analysis.py           # Symptom and assessment analysis logic
│   ├── preprocessing.py      # Handles session data loading
│   ├── report.py             # Report generation
│   ├── openai_api.py         # Integration with OpenAI API
├── components/
│   ├── ui.py                 # Streamlit UI components
│   ├── visualization.py      # Visualization functions
├── requirements.txt          # Python dependencies
├── README.md                 # Documentation
├── .env                      # Environment variables (API keys)
└── progress_report.json       # Sample report generated by the app
```

---

## **Setup Instructions**

### **Step 1: Clone the Repository**
```bash
git clone https://github.com/your-repo-url.git
cd project
```

### **Step 2: Install Dependencies**
Ensure you have Python 3.8 or higher installed. Install required packages:
```bash
pip install -r requirements.txt
```

### **Step 3: Set Up Environment Variables**
Create a `.env` file in the root directory and add your OpenAI API key:
```plaintext
OPENAI_API_KEY=your_openai_api_key_here
```

---

## **Running the Application**

### **Start the App**
Run the Streamlit application:
```bash
streamlit run app/app.py
```

### **Usage Workflow**
1. Open the Streamlit app in your browser (URL will be shown in the terminal, usually `http://localhost:8501`).
2. Upload session files (`.txt` or `.json`).
3. View:
   - GAD-7 and PHQ-9 scores.
   - Symptom trends and visualizations.
   - OpenAI-generated summaries.
4. Download the generated `progress_report.json` for detailed insights.

---

## **How It Works**

1. **File Upload**:
   - Upload one or more `.txt` or `.json` session files.
   - Files are grouped by client (e.g., based on filename prefixes like `client1_`).

2. **Session Data Processing**:
   - Session text is analyzed to detect keywords related to GAD-7 and PHQ-9 symptoms.
   - Session data in JSON format is loaded and parsed.

3. **Score Calculation**:
   - GAD-7 and PHQ-9 scores are calculated based on detected symptoms.
   - Severity levels (e.g., "Mild," "Moderate") are assigned based on score thresholds.

4. **Symptom Trend Analysis**:
   - Tracks symptom intensity across multiple sessions.
   - Visualizations are generated for trends:
     - Line charts, bar charts, pie charts, scatter plots.

5. **Natural Language Summaries**:
   - Summaries are generated for GAD-7, PHQ-9, and symptom trends using OpenAI's GPT API.

6. **Insights Display**:
   - Separate analyses are displayed for each client with visualizations and summaries.

7. **Report Generation**:
   - All insights are saved to a downloadable `progress_report.json`.

---

## **Examples of Output**

### **GAD-7 and PHQ-9 Scores**
```json
{
   "client1_session1.txt": {
         "GAD-7":0,
         "PHQ-9":0
      },
   "client1_session2.txt": { 
         "GAD-7":0,
         "PHQ-9":0
      }
}
```

### **Symptom Trend Visualization**
- Line chart showing the intensity of symptoms across sessions.

### **OpenAI Summary**
```
Symptom: Anxiety
Trend: 10 to 5
Summary: The client shows significant improvement in anxiety symptoms over the past two sessions. Consider continuing current therapeutic interventions.
```

---

## **Additional Notes**

### **Requirements**
- Python 3.10.16
- OpenAI API key for GPT-based summaries.

### **Dependencies**
- Streamlit for UI
- Matplotlib for visualizations
- OpenAI for GPT-powered summaries
- JSON for session data handling

---